<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

<!-- ////////////////////////////////////////////////////////////////////////
     // @license
     // This demo file is part of yFiles for HTML 2.6.0.3.
     // Copyright (c) 2000-2024 by yWorks GmbH, Vor dem Kreuzberg 28,
     // 72070 Tuebingen, Germany. All rights reserved.
     //
     // yFiles demo files exhibit yFiles for HTML functionalities. Any redistribution
     // of demo files in source code or binary form, with or without
     // modification, is not permitted.
     //
     // Owners of a valid software license for a yFiles for HTML version that this
     // demo is shipped with are allowed to use the demo source code as basis
     // for their own yFiles for HTML powered applications. Use of such programs is
     // governed by the rights and conditions as set out in the yFiles for HTML
     // license agreement.
     //
     // THIS SOFTWARE IS PROVIDED ''AS IS'' AND ANY EXPRESS OR IMPLIED
     // WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
     // MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN
     // NO EVENT SHALL yWorks BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
     // SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
     // TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
     // PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
     // LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
     // NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
     // SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     //
     ////////////////////////////////////////////////////////////////////////-->

    <title>10 Configure Layout - Tutorial: Graph Builder [yFiles for HTML]</title>
    <script type="module" src="../../resources/demo-page-init.js" async></script>

    <link rel="stylesheet" href="../../resources/style/tutorial.css" />

    <script src="../../resources/filesystem-warning.js"></script>
  </head>
  <body class="demo-tutorial theme-light">
    <header class="demo-header">
      <a
        href="https://www.yworks.com/products/yfiles"
        class="demo-header__y-logo"
        title="Visit yFiles product details"
        target="_blank"
      ></a>
      <div class="demo-header__breadcrumb-wrapper">
        <a href="https://www.yworks.com/products/yfiles">yFiles for HTML</a>
        <a href="../../README.html">Demos</a>

        <a href="../../README.html#tutorial-graph-builder"> Tutorial: Graph Builder </a>

        <span>10 Configure Layout</span>
        <a href="../../README.html" class="demo-header__mobile-back">yFiles Demos</a>
      </div>
      <div class="demo-header__right">
        <theme-button></theme-button>

        <show-source-button></show-source-button>
        <fullscreen-button></fullscreen-button>
      </div>
    </header>

    <div class="demo-page__toolbar no-overflow">
      <div class="demo-toolbar__tutorial-left">
        <!-- prettier-ignore -->
        <a class='demo-toolbar__button demo-toolbar__button--back' href='../../tutorial-graph-builder/09-configure-tags/'><span>09 Configure Tags</span></a>
      </div>
      <div
        class="demo-toolbar__tutorial-dropdown demo-toolbar__button demo-toolbar__button--low-emphasis"
      >
        <b>Step 10/13</b
        ><span class="demo-toolbar__tutorial-step-title"> &mdash; 10 Configure Layout</span>
        <div class="tutorial-dropdown">
          <a href="../../tutorial-graph-builder/01-create-graph/" class="tutorial-dropdown__item"
            >01 Create Graph</a
          ><a
            href="../../tutorial-graph-builder/02-create-nodes-sources/"
            class="tutorial-dropdown__item"
            >02 Create Nodes Sources</a
          ><a
            href="../../tutorial-graph-builder/03-create-edges-sources/"
            class="tutorial-dropdown__item"
            >03 Create Edges Sources</a
          ><a href="../../tutorial-graph-builder/04-group-nodes/" class="tutorial-dropdown__item"
            >04 Group Nodes</a
          ><a
            href="../../tutorial-graph-builder/05-implicit-grouping/"
            class="tutorial-dropdown__item"
            >05 Implicit Grouping</a
          ><a
            href="../../tutorial-graph-builder/06-configure-styles/"
            class="tutorial-dropdown__item"
            >06 Configure Styles</a
          ><a
            href="../../tutorial-graph-builder/07-create-labels-sources/"
            class="tutorial-dropdown__item"
            >07 Create Labels Sources</a
          ><a
            href="../../tutorial-graph-builder/08-configure-labels/"
            class="tutorial-dropdown__item"
            >08 Configure Labels</a
          ><a href="../../tutorial-graph-builder/09-configure-tags/" class="tutorial-dropdown__item"
            >09 Configure Tags</a
          ><a
            href="../../tutorial-graph-builder/10-configure-layout/"
            class="tutorial-dropdown__item tutorial-dropdown__item--current"
            >10 Configure Layout</a
          ><a href="../../tutorial-graph-builder/11-update-graph/" class="tutorial-dropdown__item"
            >11 Update Graph</a
          ><a
            href="../../tutorial-graph-builder/12-adjacency-graph-builder/"
            class="tutorial-dropdown__item"
            >12 Adjacency Graph Builder</a
          ><a href="../../tutorial-graph-builder/13-tree-builder/" class="tutorial-dropdown__item"
            >13 Tree Builder</a
          >
        </div>
      </div>
      <div class="demo-toolbar__tutorial-right">
        <!-- prettier-ignore -->
        <a class='demo-toolbar__button demo-toolbar__button--forward' href='../../tutorial-graph-builder/11-update-graph/'><span>11 Update Graph</span></a>
      </div>
    </div>
    <aside class="demo-page__description demo-description--draggable" data-no-header>
      <div class="demo-description__content">
        <div class="demo-description__width-limit">
          <h1>Using layout information provided by business data</h1>
          <div id="preamble">
            <div class="sectionbody">
              <div class="paragraph">
                <p>
                  In this tutorial step we will learn how to configure
                  <a href="https://docs.yworks.com/yfileshtml/#/api/GraphBuilder" target="_blank">GraphBuilder</a> to arrange the graph elements and/or adjust their
                  size using the information stored in the dataset.
                </p>
              </div>
              <div class="admonitionblock note">
                <table>
                  <tr>
                    <td class="icon">
                      <div class="title">Note</div>
                    </td>
                    <td class="content">
                      <div class="paragraph">
                        <p>
                          This step is optional when building a graph with
                          <a href="https://docs.yworks.com/yfileshtml/#/api/GraphBuilder" target="_blank">GraphBuilder</a>. If your data does not contain layout
                          information, you can proceed with the next step.
                        </p>
                      </div>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <div class="sect1">
            <h2 id="_loading_node_layout_information">Loading node layout information</h2>
            <div class="sectionbody">
              <div class="paragraph">
                <p>
                  Layout information can be stored in different formats. In this step, we assume
                  that the dataset looks like the one below where the layout information for each
                  node is stored in a <code>layout</code> property.
                </p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre
                    class="highlight"
                  ><code class="language-javascript" data-lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-attr">nodeData</span>: <span class="hljs-title class_">NodeLayoutData</span>[] = [
  {
    <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;00&#x27;</span>,
    <span class="hljs-attr">layout</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">110</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">30</span> }
  },
  {
    <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;01&#x27;</span>,
    <span class="hljs-attr">layout</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">145</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">95</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">30</span> }
  },
  {
    <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;02&#x27;</span>,
    <span class="hljs-attr">layout</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">75</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">95</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">30</span> }
  }
]</code></pre>
                </div>
              </div>
              <div class="paragraph">
                <p>
                  A
                  <a href="https://docs.yworks.com/yfileshtml/#/api/NodeCreator#NodeCreator-property-layoutProvider" target="_blank">layout provider</a>
                  will use this information to create a rectangle at a specific location for each
                  node. These rectangles will be set as the nodes'
                  <a href="https://docs.yworks.com/yfileshtml/#/api/INode#INode-property-layout" target="_blank">layout</a>.
                </p>
              </div>
              <div class="paragraph">
                <p>
                  If no layout information is provided, the
                  <a href="https://docs.yworks.com/yfileshtml/#/api/NodeDefaults#NodeDefaults-property-size" target="_blank">default size</a> will be
                  used and the node will be located at the origin.
                </p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre
                    class="highlight"
                  ><code class="language-javascript" data-lang="javascript"><span class="hljs-comment">// configure the layout provider that returns the layout information</span>
nodeSource.<span class="hljs-property">nodeCreator</span>.<span class="hljs-property">layoutProvider</span> = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> data.<span class="hljs-property">layout</span></code></pre>
                </div>
              </div>
              <div class="paragraph">
                <p>
                  Consider, for example, the dataset below. It only contains a property for the
                  y-coordinate of the location.
                </p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre
                    class="highlight"
                  ><code class="language-javascript" data-lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-attr">nodeData</span>: { <span class="hljs-attr">id</span>: string; <span class="hljs-attr">locationY</span>: number }[] = [
  { <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;03&#x27;</span>, <span class="hljs-attr">locationY</span>: <span class="hljs-number">20</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;04&#x27;</span>, <span class="hljs-attr">locationY</span>: <span class="hljs-number">95</span> }
]</code></pre>
                </div>
              </div>
              <div class="paragraph">
                <p>
                  To use this y-coordinate and assign the same x-coordinate to all nodes, use a
                  layout binding. We also specify a custom width and height for the nodes.
                </p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre
                    class="highlight"
                  ><code class="language-javascript" data-lang="javascript"><span class="hljs-comment">// create some binding for the x, y, width and height properties of the layout</span>
nodeSources.<span class="hljs-property">nodeCreator</span>.<span class="hljs-property">layoutBindings</span>.<span class="hljs-title function_">addBinding</span>(<span class="hljs-string">&#x27;x&#x27;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-number">250</span>)
nodeSources.<span class="hljs-property">nodeCreator</span>.<span class="hljs-property">layoutBindings</span>.<span class="hljs-title function_">addBinding</span>(
  <span class="hljs-string">&#x27;y&#x27;</span>,
  <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> data.<span class="hljs-property">locationY</span>
)
nodeSources.<span class="hljs-property">nodeCreator</span>.<span class="hljs-property">layoutBindings</span>.<span class="hljs-title function_">addBinding</span>(<span class="hljs-string">&#x27;width&#x27;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-number">50</span>)
nodeSources.<span class="hljs-property">nodeCreator</span>.<span class="hljs-property">layoutBindings</span>.<span class="hljs-title function_">addBinding</span>(<span class="hljs-string">&#x27;height&#x27;</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-number">30</span>)</code></pre>
                </div>
              </div>
              <div class="paragraph">
                <p>
                  Note that it is not necessary to create bindings for all properties of the node
                  layout. For example, you can just add bindings for <code>width</code> and
                  <code>height</code> and let a layout algorithm position the nodes.
                </p>
              </div>
            </div>
          </div>
          <div class="sect1">
            <h2 id="_loading_the_bend_information">Loading the bend information</h2>
            <div class="sectionbody">
              <div class="paragraph">
                <p>
                  Assume now that our dataset contains information about the bend positions of the
                  edges that has to be transferred to the graph:
                </p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre
                    class="highlight"
                  ><code class="language-javascript" data-lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-attr">edgeData</span>: <span class="hljs-title class_">EdgeLayoutData</span>[] = [
  {
    <span class="hljs-attr">sourceId</span>: <span class="hljs-string">&#x27;00&#x27;</span>,
    <span class="hljs-attr">targetId</span>: <span class="hljs-string">&#x27;01&#x27;</span>,
    <span class="hljs-attr">bends</span>: [
      { <span class="hljs-attr">x</span>: <span class="hljs-number">125</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">68</span> },
      { <span class="hljs-attr">x</span>: <span class="hljs-number">160</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">68</span> }
    ]
  },
  {
    <span class="hljs-attr">sourceId</span>: <span class="hljs-string">&#x27;00&#x27;</span>,
    <span class="hljs-attr">targetId</span>: <span class="hljs-string">&#x27;02&#x27;</span>,
    <span class="hljs-attr">bends</span>: [
      { <span class="hljs-attr">x</span>: <span class="hljs-number">125</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">68</span> },
      { <span class="hljs-attr">x</span>: <span class="hljs-number">90</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">68</span> }
    ]
  }
]</code></pre>
                </div>
              </div>
              <div class="paragraph">
                <p>
                  Transfer the bend information to the
                  <a href="https://docs.yworks.com/yfileshtml/#/api/IEdge#IEdge-property-bends" target="_blank">edge layout</a> using a
                  <a href="https://docs.yworks.com/yfileshtml/#/api/EdgeCreator#EdgeCreator-property-bendsProvider" target="_blank">bend provider</a>.
                </p>
              </div>
              <div class="listingblock">
                <div class="content">
                  <pre
                    class="highlight"
                  ><code class="language-javascript" data-lang="javascript"><span class="hljs-comment">// configure the bend provider to return the location of each bend point</span>
edgeSources.<span class="hljs-property">edgeCreator</span>.<span class="hljs-property">bendsProvider</span> = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> data.<span class="hljs-property">bends</span></code></pre>
                </div>
              </div>
              <div class="admonitionblock note">
                <table>
                  <tr>
                    <td class="icon">
                      <div class="title">Note</div>
                    </td>
                    <td class="content">
                      <div class="paragraph">
                        <p>
                          Please have a look in this tutorial step’s demo code in
                          <code>configure-layout.ts</code> and try different locations, sizes, and
                          bends.
                        </p>
                      </div>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <div class="demo-description__next-tutorial">
            <!-- prettier-ignore -->
            <a class='demo-description__button demo-description__button--solid demo-description__button--next' href='../../tutorial-graph-builder/11-update-graph/'><span>11 Update Graph</span></a>
          </div>
        </div>
      </div>
    </aside>

    <div class="demo-page__main">
      <div class="demo-main__graph-component">
        <div id="graphComponent"></div>
      </div>
    </div>

    <script src="../../resources/apply-local-storage-variables.js"></script>
    <script type="module" crossorigin="anonymous" src="app.js" async></script>
  </body>
</html>
